kind: pipeline
name: build

trigger:
  event:
    - push

steps:
  - name: greeting
    image: alpine
    commands:
      - echo hello
      - echo world

  - name: build
    image: rustdocker/rustup
    environment:
      PATH: /root/.cargo/bin:/usr/bin:/bin:/usr/sbin:/sbin
    commands:
      - rustup toolchain install $(cat rust-toolchain)
      - cargo check --features sqlite
